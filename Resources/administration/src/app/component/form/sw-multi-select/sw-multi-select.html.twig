{% block sw_multi_select %}
    <div class="sw-multi-select"
         :class="{ 'has--error': hasError }"
         ref="swMultiSelect"
         @click="setFocus"
         @keyup.esc="closeResultList"
         @keyup.enter.prevent="addSelectionOnEnter"
         @keydown.up.prevent="navigateUpResults"
         @keydown.down.prevent="navigateDownResults">

        {% block sw_multi_select_label %}
            <label v-if="label" :for="id" class="sw-multi-select__label">{{ label }}</label>
        {% endblock %}

        {% block sw_multi_select_inner %}
            <div class="sw-multi-select__inner" :class="{ 'is--expanded': isExpanded }">

                {% block sw_multi_select_selections %}
                    <transition-group name="appear" tag="ul" class="sw-multi-select__selections" mode="out-in">
                        {% block sw_multi_select_selection_item %}
                            <li class="sw-multi-select__selection-item"
                                v-for="selection in displaySelections"
                                :key="selection.id"
                                :data-id="selection.id">
                                {% block sw_multi_select_selection_text %}
                                    <span class="sw-multi-select__selection-text">
                                        {{ selection.name }}
                                    </span>
                                {% endblock %}

                                {% block sw_multi_select_selection_dismiss %}
                                    <button class="sw-multi-select__selection-dismiss"
                                            title="Delete"
                                            @click.prevent="dismissSelection(selection.id)">
                                        {% block sw_multi_select_selection_dismiss_icon %}
                                            <sw-icon name="small-default-x-line-medium"></sw-icon>
                                        {% endblock %}
                                    </button>
                                {% endblock %}
                            </li>
                        {% endblock %}

                        {% block sw_multi_select_list_item_input %}
                            <li class="sw-multi-select__selection-item-input" key="listInput">
                                {% block sw_multi_select_input %}
                                    <input ref="swMultiSelectInput"
                                           class="sw-multi-select__input"
                                           type="text"
                                           :placeholder="placeholder"
                                           v-model="searchTerm"
                                           @focus="openResultList"
                                           @keydown.delete="dismissLastSelection">
                                {% endblock %}
                            </li>
                        {% endblock %}
                    </transition-group>
                {% endblock %}

                {% block sw_multi_select_loader %}
                    <sw-loader v-if="isLoading" size="20px"></sw-loader>
                {% endblock %}

                {% block sw_multi_select_results_transition %}
                    <transition name="fade">
                        {% block sw_multi_select_results %}
                            <div class="sw-multi-select__results" v-if="isExpanded">

                                {% block sw_multi_select_results_list %}
                                    <ul v-if="filteredResults.length > 0" class="sw-multi-select__results-list">
                                        {% block sw_multi_select_result_item %}
                                            <li v-for="(result, index) in filteredResults"
                                                class="sw-multi-select__result-item"
                                                :class="{ 'is--selected': (index === activeResultPosition) }"
                                                :data-id="result.id"
                                                @mouseover="setActiveResultPosition(index)"
                                                @click="addSelection(result)">
                                                {% block sw_multi_select_result_item_text %}
                                                    <span class="sw-multi-select__result-item-text">
                                                        {{ result.name }}
                                                    </span>
                                                {% endblock %}

                                                {% block sw_multi_select_result_item_icon_transition %}
                                                    <transition name="show">
                                                        {% block sw_multi_select_result_item_icon %}
                                                            <sw-icon v-if="isSelected(result)"
                                                                     name="small-default-checkmark-line-medium"
                                                                     size="16px">
                                                            </sw-icon>
                                                        {% endblock %}
                                                    </transition>
                                                {% endblock %}
                                            </li>
                                        {% endblock %}
                                    </ul>
                                {% endblock %}

                                {% block sw_multi_select_results_empty %}
                                    <div class="sw-multi-select__results-empty-message" v-else>
                                        {% block sw_multi_select_results_empty_icon %}
                                            <sw-icon name="default-action-search" size="20px"></sw-icon>
                                        {% endblock %}

                                        {% block sw_multi_select_results_empty_text %}
                                            {{ $tc('global.sw-multi-select.messageNoResults', searchTerm, { term: searchTerm }) }}
                                        {% endblock %}
                                    </div>
                                {% endblock %}

                            </div>
                        {% endblock %}
                    </transition>
                {% endblock %}

            </div>
        {% endblock %}

    </div>
{% endblock %}